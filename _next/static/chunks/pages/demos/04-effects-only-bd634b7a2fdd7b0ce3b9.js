(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[962],{6526:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(7294),o=n(6147),s=n(5845),i=n(2212),c=n(9101);const u=(e,t=s.YQ.NORMAL)=>(0,r.forwardRef)((function({blendFunction:n,opacity:o,...s},i){const c=(0,r.useMemo)((()=>new e(s)),[s]);return(0,r.useLayoutEffect)((()=>{c.blendMode.blendFunction=n||t,void 0!==o&&(c.blendMode.opacity.value=o)}),[n,c.blendMode,o]),r.createElement("primitive",{ref:i,object:c,dispose:null})})),a=(e,t)=>{const n=e[t];return(0,r.useMemo)((()=>{if(n instanceof i.Vector2)return(new i.Vector2).set(n.x,n.y);if(Array.isArray(n)){const[e,t]=n;return(new i.Vector2).set(e,t)}}),[n])},l=()=>{try{const e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},f=u(s.rk,s.YQ.SCREEN),d=(u(s.at),(0,r.forwardRef)((function(e,t){const n=a(e,"offset"),o=(0,r.useMemo)((()=>new s.YY({...e,offset:n})),[n,e]);return r.createElement("primitive",{ref:t,object:o,dispose:null})})),(0,r.forwardRef)((function({blendFunction:e=s.YQ.NORMAL},t){const n=(0,r.useMemo)((()=>new s.TC(e)),[e]);return r.createElement("primitive",{ref:t,object:n,dispose:null})})),u(s.zo),u(s.AL),(0,r.createContext)(null)),m=r.memo((0,r.forwardRef)((({children:e,camera:t,scene:n,renderPriority:o=1,autoClear:i=!0,depthBuffer:u,disableNormalPass:a,stencilBuffer:f,multisampling:m=8,frameBufferType:p},h)=>{const{gl:w,scene:E,camera:y,size:g}=(0,c.Ky)();n=n||E,t=t||y;const[b,v]=(0,r.useMemo)((()=>{const e=new s.xC(w,{depthBuffer:u,stencilBuffer:f,multisampling:l()?m:0,frameBufferType:p});e.addPass(new s.CD(n,t));const r=a?null:new s.gh(n,t);return r&&e.addPass(r),[e,r]}),[t,w,u,f,m,p,n,a]);(0,r.useEffect)((()=>null==b?void 0:b.setSize(g.width,g.height)),[b,g]),(0,c.xQ)(((e,t)=>(w.autoClear=i,void b.render(t))),o);const x=(0,r.useRef)(null);(0,r.useEffect)((()=>{let e;return x.current&&x.current.__r3f&&b&&(e=new s.H5(t,...x.current.__r3f.objects),b.addPass(e),e.renderToScreen=!0),()=>{e&&(null==b||b.removePass(e))}}),[b,e,t]);const R=(0,r.useMemo)((()=>({composer:b,normalPass:v,camera:t,scene:n})),[b,v,t,n]);return(0,r.useImperativeHandle)(h,(()=>b),[b]),r.createElement(d.Provider,{value:R},r.createElement("group",{ref:x},e))})));(0,r.forwardRef)((function({target:e,depthTexture:t,...n},o){const{camera:c}=(0,r.useContext)(d),u=(0,r.useMemo)((()=>new s.Jy(c,n)),[c,n]);return(0,r.useLayoutEffect)((()=>{if(e){const t=e instanceof i.Vector3?(new i.Vector3).set(e.x,e.y,e.z):(new i.Vector3).set(e[0],e[1],e[2]);u.target=t}t&&u.setDepthTexture(t.texture,t.packing)}),[e,t,u]),r.createElement("primitive",{ref:o,object:u,dispose:null})})),u(s.ol),(0,r.forwardRef)((function({active:e=!0,...t},n){const o=a(t,"delay"),i=a(t,"duration"),c=a(t,"strength"),u=(0,r.useMemo)((()=>new s.sy({...t,delay:o,duration:i,strength:c})),[o,i,t,c]);return(0,r.useLayoutEffect)((()=>{u.mode=e?t.mode||s.O7.SPORADIC:s.O7.DISABLED}),[e,u,t.mode]),r.createElement("primitive",{ref:n,object:u,dispose:null})})),(0,r.forwardRef)((function(e,t){const{camera:n}=(0,r.useContext)(d),o=(0,r.useMemo)((()=>new s.KI(n,e.sun,e)),[n,e]);return r.createElement("primitive",{ref:t,object:o,dispose:null})})),(0,r.forwardRef)((function({size:e,...t},n){const o=(0,r.useMemo)((()=>new s.Qt(t)),[t]);return(0,r.useLayoutEffect)((()=>{e&&o.setSize(e.width,e.height)}),[o,e]),r.createElement("primitive",{ref:n,object:o,dispose:null})})),u(s.JL),u(s.xV,s.YQ.COLOR_DODGE),(0,r.forwardRef)((function({selection:e=[],selectionLayer:t=10,blendFunction:n,patternTexture:o,edgeStrength:i,pulseSpeed:c,visibleEdgeColor:u,hiddenEdgeColor:a,width:l,height:f,kernelSize:m,blur:p,xRay:h,...w},E){const{scene:y,camera:g}=(0,r.useContext)(d),b=(0,r.useMemo)((()=>new s.Mn(y,g,{blendFunction:n,patternTexture:o,edgeStrength:i,pulseSpeed:c,visibleEdgeColor:u,hiddenEdgeColor:a,width:l,height:f,kernelSize:m,blur:p,xRay:h})),[n,p,g,i,f,a,m,o,c,y,u,l,h]);return(0,r.useEffect)((()=>{b.clearSelection(),b.setSelection(Array.isArray(e)?e.map((e=>e.current)):[e.current])}),[b,e]),(0,r.useEffect)((()=>{b.selectionLayer=t}),[b,t]),r.createElement("primitive",{ref:E,object:b,dispose:null})})),(0,r.forwardRef)((function({granularity:e=5},t){const n=(0,r.useMemo)((()=>new s.Qg(e)),[e]);return r.createElement("primitive",{ref:t,object:n,dispose:null})})),u(s.p$,s.YQ.OVERLAY),(0,r.forwardRef)((function({selection:e=[],selectionLayer:t=10,lights:n=[],luminanceThreshold:o,luminanceSmoothing:i,intensity:c,width:u,height:a,kernelSize:l},f){0===n.length&&console.warn("SelectiveBloom requires lights to work.");const{scene:m,camera:p}=(0,r.useContext)(d),h=(0,r.useMemo)((()=>new s.V$(m,p,{blendFunction:s.YQ.SCREEN,luminanceThreshold:o,luminanceSmoothing:i,intensity:c,width:u,height:a,kernelSize:l})),[p,a,c,l,i,o,m,u]);return(0,r.useEffect)((()=>{h.selection.set(Array.isArray(e)?e.map((e=>e.current)):[e.current])}),[h,e]),(0,r.useEffect)((()=>{h.selection.layer=t}),[h,t]),(0,r.useEffect)((()=>(n.forEach((e=>((e,t)=>{e.current&&e.current.layers.enable(t.selection.layer)})(e,h))),()=>n.forEach((e=>((e,t)=>{e.current&&e.current.layers.disable(t.selection.layer)})(e,h))))),[h,n,t]),r.createElement("primitive",{ref:f,object:h,dispose:null})})),u(s.wL),(0,r.forwardRef)((function(e,t){const{camera:n,normalPass:o}=(0,r.useContext)(d),i=(0,r.useMemo)((()=>null===o?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),null):new s.bn(n,o.renderTarget.texture,{blendFunction:s.YQ.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,scale:.5,bias:.5,...e})),[n,o,e]);return r.createElement("primitive",{ref:t,object:i,dispose:null})})),(0,r.forwardRef)((function({preset:e=s.F9.HIGH,edgeDetectionMode:t=s.HN.COLOR},n){const o=(0,c.U2)(s.hB,""),i=(0,r.useMemo)((()=>new s.fY(...o,e,t)),[o,e,t]);return r.createElement("primitive",{ref:n,object:i,dispose:null})})),(0,r.forwardRef)((function({textureSrc:e,texture:t,...n},o){const u=(0,c.U2)(i.TextureLoader,e);(0,r.useLayoutEffect)((()=>{u.encoding=i.sRGBEncoding,u.wrapS=u.wrapT=i.RepeatWrapping}),[u]);const a=(0,r.useMemo)((()=>new s.tq({...n,texture:u||t})),[n,u,t]);return r.createElement("primitive",{ref:o,object:a,dispose:null})})),u(s.M4),u(s.Dd),u(s.Uy),(0,r.forwardRef)((function({lut:e,tetrahedralInterpolation:t,...n},o){const i=(0,r.useMemo)((()=>new s.YH(e,n)),[e,n]);return(0,r.useLayoutEffect)((()=>{e&&i.setLUT(e),t&&i.setTetrahedralInterpolationEnabled(t)}),[i,e,t]),r.createElement("primitive",{ref:o,object:i,dispose:null})}));var p=n(5893);function h(){var e=(0,o.M4)({intensity:{value:.5,min:.1,max:5,step:.01},threshold:{value:.67,min:0,max:1,step:.01},opacity:{value:.35,min:0,max:1,step:.05}}),t=e.intensity,n=e.threshold,r=e.opacity;return(0,p.jsx)(m,{children:(0,p.jsx)(f,{luminanceThreshold:n,intensity:t,luminanceSmoothing:0,opacity:r})})}},6099:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demos/04-effects-only",function(){return n(6526)}])}},function(e){e.O(0,[774,737,429,101,147,888,179],(function(){return t=6099,e(e.s=t);var t}));var t=e.O();_N_E=t}]);