(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{5979:function(e,t,n){"use strict";n.r(t);var r=n(7294),o=n(9101),s=n(2212),a=n(6147),i=n(5893);t.default=function(e){var t=e.speed,n=void 0===t?1:t,c=(0,a.M4)({starColor:"#db2438",starCount:{value:500,min:0,max:1e3,step:1},starSpread:{value:30,min:1,max:100,step:1},wrapDistance:{value:70,min:20,max:100,step:1}}),u=c.starCount,l=c.starColor,d=c.starSpread,f=c.wrapDistance,m=(0,r.useRef)(),p=(0,r.useMemo)((function(){return new s.Object3D}),[]),h=(0,r.useMemo)((function(){for(var e=[],t=0;t<u;t++)e.push({speedFactor:s.MathUtils.randFloat(.2,1),x:s.MathUtils.randFloat(-d,d),y:s.MathUtils.randFloat(-d,d),z:s.MathUtils.randFloat(-d,d),random:s.MathUtils.randFloat(20,100)});return e}),[u,d]);return(0,o.xQ)((function(e){var t=e.clock.elapsedTime;h.forEach((function(e,r){var o=e.x,s=e.y,a=e.z,i=e.random,c=e.speedFactor,u=(s-t*n*c)%f+(0===n?0:f/2),l=Math.cos(i);p.position.set(o,u,a),p.scale.set(l,l,l),p.rotation.set(0,Math.PI*t*(i/50),0),p.updateMatrix(),m.current.setMatrixAt(r,p.matrix)})),m.current.instanceMatrix.needsUpdate=!0})),(0,i.jsxs)("instancedMesh",{ref:m,args:[null,null,u],children:[(0,i.jsx)("planeGeometry",{args:[.25,10]}),(0,i.jsx)("meshPhongMaterial",{color:l,side:s.DoubleSide,depthWrite:!1})]})}},6526:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(7294),o=n(6147),s=n(5845),a=n(2212),i=n(9101);const c=(e,t=s.YQ.NORMAL)=>(0,r.forwardRef)((function({blendFunction:n,opacity:o,...s},a){const i=(0,r.useMemo)((()=>new e(s)),[s]);return(0,r.useLayoutEffect)((()=>{i.blendMode.blendFunction=n||t,void 0!==o&&(i.blendMode.opacity.value=o)}),[n,i.blendMode,o]),r.createElement("primitive",{ref:a,object:i,dispose:null})})),u=(e,t)=>{const n=e[t];return(0,r.useMemo)((()=>{if(n instanceof a.Vector2)return(new a.Vector2).set(n.x,n.y);if(Array.isArray(n)){const[e,t]=n;return(new a.Vector2).set(e,t)}}),[n])},l=()=>{try{const e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},d=c(s.rk,s.YQ.SCREEN),f=(c(s.at),(0,r.forwardRef)((function(e,t){const n=u(e,"offset"),o=(0,r.useMemo)((()=>new s.YY({...e,offset:n})),[n,e]);return r.createElement("primitive",{ref:t,object:o,dispose:null})})),(0,r.forwardRef)((function({blendFunction:e=s.YQ.NORMAL},t){const n=(0,r.useMemo)((()=>new s.TC(e)),[e]);return r.createElement("primitive",{ref:t,object:n,dispose:null})})),c(s.zo),c(s.AL),(0,r.createContext)(null)),m=r.memo((0,r.forwardRef)((({children:e,camera:t,scene:n,renderPriority:o=1,autoClear:a=!0,depthBuffer:c,disableNormalPass:u,stencilBuffer:d,multisampling:m=8,frameBufferType:p},h)=>{const{gl:x,scene:w,camera:M,size:g}=(0,i.Ky)();n=n||w,t=t||M;const[v,y]=(0,r.useMemo)((()=>{const e=new s.xC(x,{depthBuffer:c,stencilBuffer:d,multisampling:l()?m:0,frameBufferType:p});e.addPass(new s.CD(n,t));const r=u?null:new s.gh(n,t);return r&&e.addPass(r),[e,r]}),[t,x,c,d,m,p,n,u]);(0,r.useEffect)((()=>null==v?void 0:v.setSize(g.width,g.height)),[v,g]),(0,i.xQ)(((e,t)=>(x.autoClear=a,void v.render(t))),o);const E=(0,r.useRef)(null);(0,r.useEffect)((()=>{let e;return E.current&&E.current.__r3f&&v&&(e=new s.H5(t,...E.current.__r3f.objects),v.addPass(e),e.renderToScreen=!0),()=>{e&&(null==v||v.removePass(e))}}),[v,e,t]);const b=(0,r.useMemo)((()=>({composer:v,normalPass:y,camera:t,scene:n})),[v,y,t,n]);return(0,r.useImperativeHandle)(h,(()=>v),[v]),r.createElement(f.Provider,{value:b},r.createElement("group",{ref:E},e))})));(0,r.forwardRef)((function({target:e,depthTexture:t,...n},o){const{camera:i}=(0,r.useContext)(f),c=(0,r.useMemo)((()=>new s.Jy(i,n)),[i,n]);return(0,r.useLayoutEffect)((()=>{if(e){const t=e instanceof a.Vector3?(new a.Vector3).set(e.x,e.y,e.z):(new a.Vector3).set(e[0],e[1],e[2]);c.target=t}t&&c.setDepthTexture(t.texture,t.packing)}),[e,t,c]),r.createElement("primitive",{ref:o,object:c,dispose:null})})),c(s.ol),(0,r.forwardRef)((function({active:e=!0,...t},n){const o=u(t,"delay"),a=u(t,"duration"),i=u(t,"strength"),c=(0,r.useMemo)((()=>new s.sy({...t,delay:o,duration:a,strength:i})),[o,a,t,i]);return(0,r.useLayoutEffect)((()=>{c.mode=e?t.mode||s.O7.SPORADIC:s.O7.DISABLED}),[e,c,t.mode]),r.createElement("primitive",{ref:n,object:c,dispose:null})})),(0,r.forwardRef)((function(e,t){const{camera:n}=(0,r.useContext)(f),o=(0,r.useMemo)((()=>new s.KI(n,e.sun,e)),[n,e]);return r.createElement("primitive",{ref:t,object:o,dispose:null})})),(0,r.forwardRef)((function({size:e,...t},n){const o=(0,r.useMemo)((()=>new s.Qt(t)),[t]);return(0,r.useLayoutEffect)((()=>{e&&o.setSize(e.width,e.height)}),[o,e]),r.createElement("primitive",{ref:n,object:o,dispose:null})})),c(s.JL),c(s.xV,s.YQ.COLOR_DODGE),(0,r.forwardRef)((function({selection:e=[],selectionLayer:t=10,blendFunction:n,patternTexture:o,edgeStrength:a,pulseSpeed:i,visibleEdgeColor:c,hiddenEdgeColor:u,width:l,height:d,kernelSize:m,blur:p,xRay:h,...x},w){const{scene:M,camera:g}=(0,r.useContext)(f),v=(0,r.useMemo)((()=>new s.Mn(M,g,{blendFunction:n,patternTexture:o,edgeStrength:a,pulseSpeed:i,visibleEdgeColor:c,hiddenEdgeColor:u,width:l,height:d,kernelSize:m,blur:p,xRay:h})),[n,p,g,a,d,u,m,o,i,M,c,l,h]);return(0,r.useEffect)((()=>{v.clearSelection(),v.setSelection(Array.isArray(e)?e.map((e=>e.current)):[e.current])}),[v,e]),(0,r.useEffect)((()=>{v.selectionLayer=t}),[v,t]),r.createElement("primitive",{ref:w,object:v,dispose:null})})),(0,r.forwardRef)((function({granularity:e=5},t){const n=(0,r.useMemo)((()=>new s.Qg(e)),[e]);return r.createElement("primitive",{ref:t,object:n,dispose:null})})),c(s.p$,s.YQ.OVERLAY),(0,r.forwardRef)((function({selection:e=[],selectionLayer:t=10,lights:n=[],luminanceThreshold:o,luminanceSmoothing:a,intensity:i,width:c,height:u,kernelSize:l},d){0===n.length&&console.warn("SelectiveBloom requires lights to work.");const{scene:m,camera:p}=(0,r.useContext)(f),h=(0,r.useMemo)((()=>new s.V$(m,p,{blendFunction:s.YQ.SCREEN,luminanceThreshold:o,luminanceSmoothing:a,intensity:i,width:c,height:u,kernelSize:l})),[p,u,i,l,a,o,m,c]);return(0,r.useEffect)((()=>{h.selection.set(Array.isArray(e)?e.map((e=>e.current)):[e.current])}),[h,e]),(0,r.useEffect)((()=>{h.selection.layer=t}),[h,t]),(0,r.useEffect)((()=>(n.forEach((e=>((e,t)=>{e.current&&e.current.layers.enable(t.selection.layer)})(e,h))),()=>n.forEach((e=>((e,t)=>{e.current&&e.current.layers.disable(t.selection.layer)})(e,h))))),[h,n,t]),r.createElement("primitive",{ref:d,object:h,dispose:null})})),c(s.wL),(0,r.forwardRef)((function(e,t){const{camera:n,normalPass:o}=(0,r.useContext)(f),a=(0,r.useMemo)((()=>null===o?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),null):new s.bn(n,o.renderTarget.texture,{blendFunction:s.YQ.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,scale:.5,bias:.5,...e})),[n,o,e]);return r.createElement("primitive",{ref:t,object:a,dispose:null})})),(0,r.forwardRef)((function({preset:e=s.F9.HIGH,edgeDetectionMode:t=s.HN.COLOR},n){const o=(0,i.U2)(s.hB,""),a=(0,r.useMemo)((()=>new s.fY(...o,e,t)),[o,e,t]);return r.createElement("primitive",{ref:n,object:a,dispose:null})})),(0,r.forwardRef)((function({textureSrc:e,texture:t,...n},o){const c=(0,i.U2)(a.TextureLoader,e);(0,r.useLayoutEffect)((()=>{c.encoding=a.sRGBEncoding,c.wrapS=c.wrapT=a.RepeatWrapping}),[c]);const u=(0,r.useMemo)((()=>new s.tq({...n,texture:c||t})),[n,c,t]);return r.createElement("primitive",{ref:o,object:u,dispose:null})})),c(s.M4),c(s.Dd),c(s.Uy),(0,r.forwardRef)((function({lut:e,tetrahedralInterpolation:t,...n},o){const a=(0,r.useMemo)((()=>new s.YH(e,n)),[e,n]);return(0,r.useLayoutEffect)((()=>{e&&a.setLUT(e),t&&a.setTetrahedralInterpolationEnabled(t)}),[a,e,t]),r.createElement("primitive",{ref:o,object:a,dispose:null})}));var p=n(5893);function h(){var e=(0,o.M4)({intensity:{value:.5,min:.1,max:5,step:.01},threshold:{value:.67,min:0,max:1,step:.01},opacity:{value:.35,min:0,max:1,step:.05}}),t=e.intensity,n=e.threshold,r=e.opacity;return(0,p.jsx)(m,{children:(0,p.jsx)(d,{luminanceThreshold:n,intensity:t,luminanceSmoothing:0,opacity:r})})}},5360:function(e,t,n){"use strict";n.r(t);var r=n(7294),o=n(2212),s=n(9101),a=n(6147),i=n(5893);t.default=function(e){var t=e.speed,n=void 0===t?100:t,c=e.particleSize,u=void 0===c?.1:c,l=(0,a.M4)({smokeDensity:{value:485,min:0,max:1e3,step:1},smokeSpread:{value:3,min:0,max:10,step:.5},smokeLength:{value:15,min:10,max:100,step:1},smokeColor:"#4ce5df",smokeOpacity:{value:.25,min:0,max:1,step:.05},smokeSize:{value:5,min:1,max:100,step:1},smokeGrowthRate:{value:.5,min:.1,max:1.5,step:.05}}),d=l.smokeDensity,f=l.smokeSpread,m=l.smokeLength,p=l.smokeColor,h=l.smokeOpacity,x=l.smokeSize,w=l.smokeGrowthRate,M=(0,r.useRef)(),g=(0,r.useMemo)((function(){return new o.Object3D}),[]),v=(0,r.useMemo)((function(){for(var e=[],t=0;t<d;t++)e.push({speedVariation:o.MathUtils.randFloat(.01,.51),y:o.MathUtils.randFloat(0,0+m),growX:o.MathUtils.randFloatSpread(f),growZ:o.MathUtils.randFloatSpread(f)});return e}),[d,f,m]);return(0,s.xQ)((function(e){var t=e.clock.elapsedTime;v.forEach((function(e,r){var o=e.speedVariation,s=e.y,a=e.growX,i=e.growZ,c=t*Math.max(1,n)*o,u=Math.min(0,(s-c)%m),l=u/m,d=a*l+Math.sin(a*t)*f*l,p=i*l+Math.sin(i*t)*f*l,h=Math.min(.5*Math.pow(2,Math.abs(u*w)),x);g.position.set(d,u,p),g.scale.set(h,h,h),g.updateMatrix(),M.current.setMatrixAt(r,g.matrix)})),M.current.instanceMatrix.needsUpdate=!0})),(0,i.jsxs)("instancedMesh",{ref:M,args:[null,null,d],position:[0,-1,0],children:[(0,i.jsx)("sphereGeometry",{args:[u,10,10]}),(0,i.jsx)("meshBasicMaterial",{color:p,transparent:!0,opacity:h,depthWrite:!1})]})}},2224:function(e,t,n){"use strict";n.r(t);n(7294);var r=n(9101),o=n(6037),s=n(6147),a=n(5979),i=n(5360),c=n(6526),u=n(5893),l=function(){var e=(0,s.M4)({background:"#01020d",speed:{value:50,min:0,max:200}}),t=e.background,n=e.speed;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("color",{attach:"background",args:[t]}),(0,u.jsx)(o.z,{}),(0,u.jsx)("ambientLight",{intensity:.5}),(0,u.jsx)(d,{}),(0,u.jsx)(i.default,{speed:n}),(0,u.jsx)(a.default,{speed:n})]})},d=function(){return(0,u.jsxs)("mesh",{children:[(0,u.jsx)("coneGeometry",{args:[.75,2,30]}),(0,u.jsx)("meshStandardMaterial",{color:"#ff8474"})]})};t.default=function(e){var t=e.showControls,n=void 0===t||t;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(r.Xz,{camera:{position:[1,-10,15]},children:[(0,u.jsx)(l,{}),(0,u.jsx)(c.default,{})]}),(0,u.jsx)(s.Zf,{hidden:!n})]})}},7536:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/demos/04-smoke-with-effects",function(){return n(2224)}])}},function(e){e.O(0,[774,737,429,101,147,37,888,179],(function(){return t=7536,e(e.s=t);var t}));var t=e.O();_N_E=t}]);